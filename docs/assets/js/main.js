"use strict";console.log(">> Ready :)");const listAnime=document.querySelector(".js-list-anime"),btnSearch=document.querySelector(".js-btn-search"),inputSearch=document.querySelector(".js-input-search"),listAnimeFav=document.querySelector(".js-list-fav"),btnFavReset=document.querySelector(".js-btn-fav-reset");let animeData=[],favourites=[];function getDataApi(e){fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{animeData=e.data;for(const e of animeData)'"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png'===e.images.jpg.image_url&&(e.images.jpg.image_url="https://via.placeholder.com/210x295/ffffff/666666/?text=TV");renderAnime()})}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));e&&(favourites=e,renderAnimeFav(favourites),console.log("hay cosas")),console.log(e)}function renderAnime(){let e="",i="",t="";for(const a of animeData){const n=favourites.findIndex(e=>a.mal_id===e.mal_id);console.log(n),-1!==n?(i="class-title",t="class-li"):(i="",t=""),e+=` <li class="li-serie js-list-serie  ${t} "  id= ${a.mal_id}>\n        `,e+=`<h3 class="li-serie__title ${i}">${a.title} </h3>`,e+=`<img class="li-serie__image" src="${a.images.jpg.image_url} "\n          alt="imagen">`,e+="  </li>"}listAnime.innerHTML=e,listenerSerie()}function renderAnimeFav(){let e="";for(const i of favourites)e+=`<li class="li-serie js-list-serie" id= ${i.mal_id}>`,e+=` <h3 class="li-serie__title">${i.title} </h3>`,e+=`<img class="li-serie__image" src="${i.images.jpg.image_url} "\n          alt="imagen">`,e+='<i class="fa-solid fa-circle-xmark li-serie__icon "></i>',e+=" </li>";listAnimeFav.innerHTML=e,listenerSerie()}function handleclick(e){e.preventDefault();getDataApi(inputSearch.value)}function handleclickFav(e){e.preventDefault;const i=parseInt(e.currentTarget.id);console.log(i);const t=animeData.find(e=>e.mal_id===i),a=favourites.findIndex(e=>e.mal_id===i);-1===a?favourites.push(t):favourites.splice(a,1),renderAnimeFav(),renderAnime(),localStorage.setItem("data",JSON.stringify(favourites)),console.log(favourites)}function listenerSerie(){const e=document.querySelectorAll(".js-list-serie");for(const i of e)i.addEventListener("click",handleclickFav)}function handleClickReset(){localStorage.clear(),console.log(handleClickReset)}onLoad(),btnSearch.addEventListener("click",handleclick),btnFavReset.addEventListener("click",handleClickReset);