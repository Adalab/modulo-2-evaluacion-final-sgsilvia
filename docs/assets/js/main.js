"use strict";console.log(">> Ready :)");const listAnime=document.querySelector(".js-list-anime"),btnSearch=document.querySelector(".js-btn-search"),inputSearch=document.querySelector(".js-input-search"),listAnimeFav=document.querySelector(".js-list-fav"),btnFavReset=document.querySelector(".js-btn-fav-reset"),btnHeaderReset=document.querySelector(".js-btn-reset");let animeData=[],favourites=[];function getDataApi(e){fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{animeData=e.data,bucleAnimedata(),renderAnime()})}function bucleAnimedata(){for(const e of animeData)'"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png'===e.images.jpg.image_url&&(e.images.jpg.image_url="https://via.placeholder.com/210x295/ffffff/666666/?text=TV")}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));e&&(favourites=e,renderAnimeFav(favourites),console.log("hay cosas"))}function renderAnime(){let e="",t="",i="";for(const a of animeData){const n=favourites.findIndex(e=>a.mal_id===e.mal_id);console.log(n),-1!==n?(t="class-title",i="class-li"):(t="",i=""),e+=` <li class="li-serie js-list-serie  ${i} "  id= ${a.mal_id}>\n        `,e+=`<h3 class="li-serie__title ${t}">${a.title} </h3>`,e+=`<img class="li-serie__image" src="${a.images.jpg.image_url} "\n          alt="imagen">`,e+="  </li>"}listAnime.innerHTML=e,listenerSerie()}function renderAnimeFav(){let e="";for(const t of favourites)e+=`<li class="li-serie js-list-serie" id= ${t.mal_id}>`,e+=` <h3 class="li-serie__title">${t.title} </h3>`,e+=`<img class="li-serie__image" src="${t.images.jpg.image_url} "\n          alt="imagen">`,e+='<i class="fa-solid fa-circle-xmark li-serie__icon "></i>',e+=" </li>";listAnimeFav.innerHTML=e,listenerSerie()}function handleclick(e){e.preventDefault();getDataApi(inputSearch.value)}function handleclickFav(e){e.preventDefault;const t=parseInt(e.currentTarget.id),i=animeData.find(e=>e.mal_id===t),a=favourites.findIndex(e=>e.mal_id===t);-1===a?favourites.push(i):favourites.splice(a,1),renderAnimeFav(),renderAnime(),localStorage.setItem("data",JSON.stringify(favourites))}function handleClickReset(){localStorage.clear(),clearFav(),renderAnimeFav()}function clearFav(){favourites=[]}function handleClickHeaderReset(e){e.preventDefault(),console.log(btnHeaderReset),clearInput(),clearList(),renderAnime()}function clearInput(){inputSearch.value=""}function clearList(){animeData=[]}function listenerSerie(){const e=document.querySelectorAll(".js-list-serie");for(const t of e)t.addEventListener("click",handleclickFav)}onLoad(),btnSearch.addEventListener("click",handleclick),btnFavReset.addEventListener("click",handleClickReset),btnHeaderReset.addEventListener("click",handleClickHeaderReset);